<!DOCTYPE html>
<html>
<head>
<title>sakila Country</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
	padding: 0;
	margin: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	background-position: 0 0;
	background-repeat: no-repeat;
	background-attachment: fixed;
	background-size: cover;
	position: relative;
	overflow-y: auto;
}

#aside {
	width: 200px;
	height: 3000px;
	position: fixed;
	background: orange;
	overflow: hidden;
	float: left;
}

#section {
	margin-left: 300px;
	margin-right: 500px;
	margin-bottom: 100px;
	background: white;
}
</style>
</head>
<body>
	<div id="aside">
		<h1>MENU</h1>
		<ul>
			<li>
				<div>Address 관리</div>
				<ol>
					<li><a href="/sakila/address/country.html">Country 관리</a></li>
					<li>City 관리</li>
					<li>Address 관리</li>
				</ol>
			</li>
			<li><a href="">Customer 관리</a></li>
			<li><a href="">Business 관리</a></li>
			<li><a href="">Inventory 관리</a></li>
		</ul>
	</div>
	<div id="section">
		<h1>Country 관리</h1>
		<h2>Country 입력</h2>
		<div>
			<div>
				COUNTRY 입력:<input type="text" id="country" value="">
			</div>
			<button type="button" id="addCountry">Add</button>
		</div>

		<table>
			<thead>
				<th>country_id</th>
				<th>Country</th>
				<th>last_Update</th>
			</thead>
			<tbody id="list">
				<!-- list가져온다. Servlet에서 -->
			</tbody>
		</table>

	</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
	//add 버튼 클릭시
	$("#addCountry").click(
		function(){
			//입력 확인
			console.log("click");
			//입력값 확인
			console.log("Country :>>"+$("#country").val());
			$.ajax(
					{//객체 
				url:"/sakila/address/InsertCountry",
				method:"post",
				data:{country : $("#country").val()},
				success:function(){
							console.log("입력 Success");
							//입력 성공 시 list 보여주기, list태그 값Servlet으로
							$.ajax(
									{
										url:"",
										method:"post",
										data:{list:$("#list")},
										success:function(){
											console.log("list출력 update 완료");
											$("#list").empty();
											$.ajax(
												{//요청
												url:"/sakila/address/selectCountryList",
												method:"post",
												success:function(){//배열 생성
													for(let i;i<json.length;i++){
														let html =  "<tr>"+
																	"<td>"+json[i].country_id+"</td>"+
																	"<td>"+json[i].country+"</td>"+
																	"<td>"+json[i].last_update+"</td>"+
																	"</tr>";
																$("#list").append(html);	
														}//for
													}//success
												}//ajax 객체 {}
											)//ajax()
										}//success{}
									}//ajax{}
							)//ajax()
						}//function{}
					}//ajax객체
				)//ajax()
			}	
		)
	
</script>
</html>
