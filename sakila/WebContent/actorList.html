<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>출현한 배우 리스트</title>
<script src="/jquery-ex/scripts/jquery-3.4.1.min.js"></script>
</head>
<body>
<h1>배우들....</h1>
	
		Actor:<input type="text" id="actorName">
			<button id="actorFilm">검색</button>
			<table border="1">
					<thead>
						<tr>
							<td>제목</td>
							<td>설명</td>
							<td>개봉년도</td>
						</tr>	
					</thead>
					<tbody id="filmList">
					</tbody>
			</table>
	<div id="actor">
		<table border="1">
			<thead>
				<tr>
					<td>번호</td>
					<td>배우 이름</td>
				</tr>
			</thead>
			<tbody id="actorList">
			
			</tbody>
		</table>
		 	<button id="aprev">이전</button>
		 	
		 	<button id="anext">다음</button>
 	</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
	let currentPage=1;
	//$("#aprev").hide();
	 $.ajax({
		url:"/sakila/getActorList",
		method:"post",
		data:{
			"currentPage":currentPage
		},
		success:function(json){
			console.log("리스트 체크"+json);
			$(json).each(function(index,item){
				$("#actorList").append(
						"<tr><td class='id'>"+item.actorId+"</td>"
						+"<td>"+item.name+"</a></td>"
						+"</tr>"
						);
			})
		}
	 })
	 
	 //이전버튼
	
		 
		 $("#aprev").click(function(){
			 $("#actorList").empty();
			 currentPage-=1;
			 console.log(currentPage)
			 $.ajax({
				url:"/sakila/getActorList",
				method:"post",
				data:{
					"currentPage":currentPage
				},
			 	success:function(json){
					console.log("리스트 체크"+json);
					$(json).each(function(index,item){
						$("#actorList").append(
								"<tr><td class='id'>"+item.actorId+"</td>"
								+"<td>"+item.name+"</a></td>"
								+"</tr>"
								);
					})
				}
			 }) 
		 })
	

	 
	 
	 //if(currentPage<lastPage){
		 
		// $("#next").show();
		 $("#anext").click(function(){
			 $("#actorList").empty();
			 currentPage+=1;
			 $.ajax({
				url:"/sakila/getActorList",
				method:"post",
				data:{
					"currentPage":currentPage
				},
			 	success:function(json){
					console.log("page-"+currentPage);
					$(json).each(function(index,item){
						$("#actorList").append(
								"<tr><td class='id'>"+item.actorId+"</td>"
								+"<td>"+item.name+"</a></td>"
								+"</tr>"
								);
					})
				}
			 }) 
		 })
	 //}else{
		// $("#next").hide();
	 //}
		
	 $("#actorFilm").click(function(){
		 $("#filmList").empty();
		let actorName=$("#actorName").val();
		console.log("name:"+actorName);
				$.ajax({
					url:"/sakila/SelectActorOne",
					method:"post",
					data:{
						"name":actorName
						},
					success:function(json){
						console.log(json);
						$("#actor").empty();
						$(json).each(function(index,item){
							$("#filmList").append(
									"<tr>"
									+"<td>"+item.title+"</td>"
									+"<td>"+item.description+"</td>"
									+"<td>"+item.releaseYear+"</td>"
									+"</tr>"
							)
						});
					}
				})
		})	
		 
	
</script>
</html>